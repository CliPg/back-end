# 风格指南

关于此样式指南的一些注释：我们尝试使其尽可能接近默认的 IntelliJ 样式检查器。样式检查器还包括一些 IntelliJ 不会检查的“代码质量”检查。

关于此样式指南的注释：通过运行自动样式检查器可能更容易了解这些规则。您可以通过右键单击左侧边栏中的文件并选择“检查样式”来在 IntelliJ 中运行样式检查器。这将在所选文件中生成样式错误列表。请务必在再次运行样式检查器之前保存或重新编译文件。

![Intellij 右键菜单打开的屏幕截图](https://fa23.datastructur.es/materials/guides/style/intellij_style_checker.png)

该风格指南也可能不完整。我试图使其尽可能全面，但我可能错过了一些新添加的规则的描述。

## 空白

1. 每个文件必须以换行符序列结尾。

2. 文件不能包含水平制表符。仅使用空格（空格）进行缩进。

3. 不要放置空格：

   - 在通用类型名称周围`<`和内部（ 、 not或）。`>``List<Integer>``List <Integer>``List< Integer >`
   - 在前缀运算符`!`, `--`, `++`, 一元`-`或一元之后`+`。
   - 在标记`;`或后缀运算符`--`和之前`++`。
   - 之后`(`或之前`)`。
   - 后`.`

4. 请放置空格：

   - `;`在、或 类型转换之后`,`（例如`(String) x`、 not `(String)x`）。
   - 围绕二元运算符（例如，`*`, `+`）和比较运算符。
   - 围绕赋值运算符（例如，`=`, `+=`）。
   - 三元条件运算符 ( )周围`?`和内部。`:``x > 0 ? x : -x`
   - 围绕关键词`assert`, `catch`, `do`, `else`, `finally`, `for`, `if`, `return`,`try`和`while`。

5. 一般来说，如果您需要对单个语句使用多行，请在运算符之前中断（插入换行符）行，如下所示

   ```
   ... + 20 * X
       + Y;
   ```

6. 不要用`(`空格分隔方法名称和方法调用中的 。但是，您可以在长行上用换行符后跟空格（用于缩进）将它们分开。

### 缩进

1. 基本的缩进步骤是 4 个空格。

2. 按每个块级别的基本缩进步骤缩进代码（块通常包含在`{`和`}`中），如下所示

   ```
   if (x > 0) {
      r = -x;
   } else {
      r = x;
   }
   ```

3. 缩进`case`标记超出其封闭范围的缩进`switch`，如

   ```
   switch (op) {
      case '+':
            addOpnds(x, y);
            break;
      default:
            ERROR();
   }
   ```

4. 通过基本缩进步骤缩进连续行。

## 大括号

1. 使用`{` `}`大括号将所有`if`、`while`、`do`和 'for' 语句的语句括起来。

2. 将`}`大括号与后面的`else`, `finally`, 或放在同一行`catch`，如下所示

   ```
   if (x > 0) {
      y = -x;
   } else {
      y = x;
   }
   ```

3. 将打开`{`一个块的 放在一行的末尾。通常，它位于`if`、`for`、`while`、`switch`、`do`、 方法头或包含它的类头的末尾。如果行长度迫使它到下一行，不要缩进它，并将其单独放在行上。

## 评论

1. 方法应该有 javadoc 注释来解释行为、参数（使用 @param 标签或其他方式）和返回类型。
2. 返回非 void 值的方法必须在其 Javadoc 注释中使用“@return”标记或在运行文本中包含单词“return”、“returning”或“returns”的短语中进行描述。
3. 每个 Javadoc 注释必须以格式正确的句子开头，以大写字母开头，以句点结尾。

## 名字

1. 静态最终常量的名称必须全部大写（例如，RED、DEFAULT_NAME）。
2. 参数、局部变量和方法的名称必须以小写字母开头，或者由单个大写字母组成。
3. 类型（类）的名称，包括类型参数，必须以大写字母开头。
4. 包的名称必须以小写字母开头。
5. 实例变量和非最终类（静态）变量的名称必须以小写字母或“_”开头。

## 进口

1. 不要两次导入相同的类或静态成员。
2. 不要导入不使用的类或成员。

## 各种 Java 风格约定

1. 在元素类型名称后面而不是声明符后面使用“[]”编写数组类型。写“字符串[]名称”，而不是“字符串名称[]”。

2. 按以下顺序编写方法、类或字段的任何修饰符：

   1. 公共、受保护或私有。
   2. 抽象的或静态的。
   3. 最终的、瞬态的或易失的。
   4. 同步。
   5. 本国的。
   6. 严格fp。

3. 不要显式修改多余的方法、字段或类：

   1. 不要将接口或注释中的方法标记为“公共”或“抽象”。
   2. 不要将接口或注释中的字段标记为“static”、“public”或“final”。
   3. 不要将最终类中的方法标记为“最终”。
   4. 不要将嵌套接口标记为“静态”。

4. 不要使用空块（“{ }”，内部仅包含空格或注释）作为控制语句。有一个例外：catch 块可能仅包含以下形式的注释

   ```
   /* Ignore EXCEPTIONNAME. */
   ```

5. 通过给它们赋予符号名称来避免代码中的“幻数”，如

   ```
   public static final int MAX_SIZE = 100;
   ```

   数字 -1、0、1、2、3、4、5、6、7、8、9、0.25、0.5 除外。

6. 不要尝试捕获异常 Exception、RuntimeError 或 Error。

7. 写“b”而不是“b == true”，写“!b”而不是“b == false”。

8. 代替

   ```
   if (condition) {
      return true;
   } else {
      return false;
   }
   ```

   只用

   ```
   return condition;
   ```

9. 只有类的静态最终字段可以是公共的。其他字段必须是私有的或受保护的。这也适用于嵌套类。

10. 仅具有静态方法和字段的类不得具有公共（或默认）构造函数。

11. 仅具有私有构造函数的类必须声明为“final”。

## 避免容易出错的结构

1. 如果一个类重写了“equals”，它也必须重写“hashCode”。这将在我们了解后应用`hashCode`。

2. 局部变量和参数不得隐藏或隐藏字段名称。处理简单控制字段的 getter/setter 方法的首选方法是在字段名称前添加“_”，如下所示

   ```
   public double getWidth() {
      return _width;
   }
   
   public void setWidth(double width) {
      _width = width;
   }
   ```

3. 不要使用嵌套赋值，例如“if ((x = next()) != null) ...”。尽管这在 C 中很有用，但在 Java 中几乎没有必要。

4. 在每个“switch”语句中包含一个“default”情况。

5. 使用“break”语句或以下形式的注释结束“switch”语句的每个分支

   ```
   /* fall through */
   ```

6. 不要将字符串文字与“==”进行比较。写

   ```
   if (x.equals("something"))
   ```

   并不是

   ```
   if (x == "something")
   ```

   在某些情况下，您确实想使用“==”，但在此类中不太可能遇到它们。

## 限制

1. 文件长度不得超过 2000 行。
2. 每行长度不得超过 120 个字符。
3. 任何方法都不能超过 80 行。
4. 任何方法都不能有超过 8 个参数。
5. 每个文件必须恰好包含一个外部类（嵌套类也可以）